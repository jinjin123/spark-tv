<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>SparkPAD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style type="text/css">
      html, body, .full-screen {
        position: fixed;
        margin:0; 
        padding:0; 
        height: 100%;
        width: 100%;
        height: 100vh;
        width: 100vw;
        border: 0px;
      }
      button{
        border:none;
        margin:0;
        padding:0;
        width:20px;
        height: 20px;        
      }
      ul{
        margin:0;
        padding-top: 0;
        padding-bottom: 0;
        padding-right: 0;
        padding-left: 20px;
      }      
      .align-center{
        height: 70%;
        width: 70%;        
        top: 50%;
        left: 50%;
        -ms-transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
        -o-transform: translate(-50%, -50%);
        transform: translate(-50%, -50%);
      }      
      .hidden {
        display:none;
      }
    </style>
  </head>

  <body>
    <form id="frmValue">
        <div id="editor"></div>
        <input type="submit" name="submit">
    </form>

    <script type="text/javascript" src="/js/jquery-2.1.4.js"></script>
    <script type="text/javascript" src="/js/Math.uuid.js"></script>
    <script type="text/javascript" src="/js/wshell.js"></script>
    <script type="text/javascript">
    {% autoescape off %}
        $(function (){
            $('#frmValue').submit(function(){ 
                console.log('jquery.submit');
                var data = $data.data('ext').value();
                $.ajax({
                    method: "POST",
                    url: '{{name}}',
                    data: JSON.stringify(data),
                    contentType : "application/json",
                    crossDomain : true,
                    processData : false,
                    jsonp : false,
                    cache : false
                }).fail(function(){
                    console.log('upload data fail');
                    alert('fail');
                }).done(function(){
                    console.log('upload data success');
                });
                return false; 
            });
            var tmplt = {
                wshell_names:['String'],
            };
            var $data = obj2html('config', tmplt, true);
            $('#editor').append($data);
            $data.data('ext').value(JSON.parse(
                '{{value}}'
            ));
        });
      {% endautoescape %}
    </script>
  </body>
</html> 
