
<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <style type="text/css">
            html, body, .full-screen {
                margin:0; 
                padding:0; 
                height: 100%;
                width: 100%;
                height: 100vh;
                width: 100vw;
                border: none;
            }
            .overlay{
                background-color: transparent;
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                border: 0;
            }
            .play{
                background-repeat: no-repeat;
                background-position: center center;  
                background-image: url(/assets/play.svg);
            }
            .stop{
                background-repeat: no-repeat;
                background-position: center center;  
                background-image: url(/assets/stop.svg);
            }
            .transparent{
                background-color:transparent;
                background-image:none;
            }
            .hidden {
                display:none;
            }
        </style>
        <title>Sparkpad Menu-board</title>
    </head>
    <body>
        <img class='full-screen transparent' id='image'></img>
        <div id='stop' class='full-screen hidden overlay stop'></div>
        <div id='play' class='full-screen hidden overlay play'></div>
        <script type="text/javascript" src="/js/jquery-2.1.4.js"></script>
        <script type="text/javascript" src="/js/Math.uuid.js"></script>
        <script type="text/javascript">
         {% autoescape off %}
            var images = [
                {% for o in imgs %}
                    {{o}},
                {% endfor %}            
            ];
            function Project(){
                var current = 0;
                var timer;
                var self = this;
                self.stop = function(){
                    window.clearInterval(timer);
                    timer = undefined;
                };
                self.play = function(){
                    window.clearInterval(timer);
                    timer = window.setInterval(function(){
                        self.next();
                    }, 10000);                    
                };
                self.next = function(){
                    current++;
                    if(current >= images.length){
                        current = 0;
                    }   
                    if(images.length > 0){
                        $('#image').attr('src', images[current]);    
                    }                    
                };
                self.previous = function(){
                    current--;
                    if(current <0){
                        current = images.length - 1;
                    }
                    if(images.length > 0){
                        $('#image').attr('src', images[current]);    
                    }                    
                };
                if(images.length>0){
                    $('#image').attr('src', images[current]);    
                }                      
            }
            function onkeydown(evt){
                function flash(obj){
                    obj.show();
                    window.setTimeout(function(){
                        obj.hide();
                    }, 500);
                }
                switch(evt.keyCode){
                case 415:
                    flash($('#play'));
                    window.project.play();
                    break;
                case 413:
                    flash($('#stop'));
                    window.project.stop();
                    break;
                case 19:
                    flash($('#stop'));
                    window.project.stop();
                    break;
                case 37://left
                    window.project.next();
                    break;
                case 39://right
                    window.project.previous();
                    break; 
                case 406:
                    console.log('blue');
                    window.location.reload();
                    break;
                case 405:
                    console.log('yellow');
                    window.location.reload();
                    break;                                                                  
                default:
                    break;
                }
            }            
            $(function(){
                window.project = new Project();                
                document.onkeydown = function(evt){
                    if(top.onkeydown){
                        top.onkeydown(evt);
                    }                    
                };
            });
            
         {% endautoescape %}            
        </script>
    </body>
</html>
